import type { Presentation } from "./store/typeAndFunctions"

export const presentationMin: Presentation = {
    title: "My presentation",
    slides: [
        {
            background: {
                type: "color",
                color: "#030303"
            },
            slideObject: [
                {
                    type: "plain_text",
                    content: "Hi",
                    fontFamily: "Arial",
                    weight: 400,
                    scale: 1.0,
                    rect: {
                        x: 500,
                        y: 100,
                        width: 200,
                        height: 50
                    },
                    id: "1"
                },
                {
                    type: "plain_text",
                    content: "OOOO",
                    fontFamily: "Times New Roman",
                    weight: 600,
                    scale: 1.1,
                    rect: {
                        x: 150,
                        y: 150,
                        width: 200,
                        height: 50
                    },
                    id: "2"
                },
                {
                    type: "picture",
                    src: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRnEic3RATSmeIjz9Od8oo32tLryBmeXCBA3g&s",
                    rect: {
                        x: 0,
                        y: 0,
                        width: 500,
                        height: 500
                    },
                    id: "3",
                }
            ],
            id: "0"
        }, 
        {
            background: {
                type: "color",
                color: "#923333ff"
            },
            slideObject: [
                {
                    type: "plain_text",
                    content: "Hi",
                    fontFamily: "Arial",
                    weight: 400,
                    scale: 1.0,
                    rect: {
                        x: 500,
                        y: 100,
                        width: 200,
                        height: 50
                    },
                    id: "5"
                },
                {
                    type: "plain_text",
                    content: "OOOO",
                    fontFamily: "Times New Roman",
                    weight: 600,
                    scale: 1.1,
                    rect: {
                        x: 150,
                        y: 150,
                        width: 200,
                        height: 50
                    },
                    id: "6"
                },
                {
                    type: "picture",
                    src: "https://shapka-youtube.ru/wp-content/uploads/2024/08/kartinka-dlya-avatarki-siluety-muzhchin-risunok-odnogo-muzhskogo-silueta.jpg",
                    rect: {
                        x: 0,
                        y: 0,
                        width: 500,
                        height: 500
                    },
                    id: "7",
                }
            ],
            id: "4"
        },
        {
            background: {
                type: "color",
                color: "#923333ff"
            },
            slideObject: [
                {
                    type: "plain_text",
                    content: "Hi",
                    fontFamily: "Arial",
                    weight: 400,
                    scale: 1.0,
                    rect: {
                        x: 500,
                        y: 100,
                        width: 200,
                        height: 50
                    },
                    id: "8"
                },
                {
                    type: "plain_text",
                    content: "OOOO",
                    fontFamily: "Times New Roman",
                    weight: 600,
                    scale: 1.1,
                    rect: {
                        x: 150,
                        y: 150,
                        width: 200,
                        height: 50
                    },
                    id: "9"
                },
                {
                    type: "picture",
                    src: "https://shapka-youtube.ru/wp-content/uploads/2024/08/kartinka-dlya-avatarki-siluety-muzhchin-risunok-odnogo-muzhskogo-silueta.jpg",
                    rect: {
                        x: 0,
                        y: 0,
                        width: 500,
                        height: 500
                    },
                    id: "10",
                }
            ],
            id: "11"
        },
        {
            background: {
                type: "picture",
                src: "https://preview.redd.it/vo9vm1fcqrp71.jpg?auto=webp&s=cb4016edf50a37cf06dbe9e975ed9410b253bff0"
            },
            slideObject: [
                {
                    type: "plain_text",
                    content: "Hi",
                    fontFamily: "Arial",
                    weight: 400,
                    scale: 1.0,
                    rect: {
                        x: 500,
                        y: 100,
                        width: 200,
                        height: 50
                    },
                    id: "12"
                },
                {
                    type: "plain_text",
                    content: "OOOO",
                    fontFamily: "Times New Roman",
                    weight: 600,
                    scale: 1.1,
                    rect: {
                        x: 150,
                        y: 150,
                        width: 200,
                        height: 50
                    },
                    id: "13"
                }
            ],
            id: "15"
        },
        {
            background: {
                type: "color",
                color: "#923333ff"
            },
            slideObject: [
                {
                    type: "plain_text",
                    content: "Hi",
                    fontFamily: "Arial",
                    weight: 400,
                    scale: 1.0,
                    rect: {
                        x: 500,
                        y: 100,
                        width: 200,
                        height: 50
                    },
                    id: "16"
                },
                {
                    type: "plain_text",
                    content: "OOOO",
                    fontFamily: "Times New Roman",
                    weight: 600,
                    scale: 1.1,
                    rect: {
                        x: 150,
                        y: 150,
                        width: 200,
                        height: 50
                    },
                    id: "17"
                },
                {
                    type: "picture",
                    src: "https://shapka-youtube.ru/wp-content/uploads/2024/08/kartinka-dlya-avatarki-siluety-muzhchin-risunok-odnogo-muzhskogo-silueta.jpg",
                    rect: {
                        x: 0,
                        y: 0,
                        width: 500,
                        height: 500
                    },
                    id: "18",
                }
            ],
            id: "19"
        },
        {
            background: {
                type: "color",
                color: "#923333ff"
            },
            slideObject: [
                {
                    type: "plain_text",
                    content: "Hi",
                    fontFamily: "Arial",
                    weight: 400,
                    scale: 1.0,
                    rect: {
                        x: 500,
                        y: 100,
                        width: 200,
                        height: 50
                    },
                    id: "20"
                },
                {
                    type: "plain_text",
                    content: "OOOO",
                    fontFamily: "Times New Roman",
                    weight: 600,
                    scale: 1.1,
                    rect: {
                        x: 150,
                        y: 150,
                        width: 200,
                        height: 50
                    },
                    id: "21"
                },
                {
                    type: "picture",
                    src: "https://shapka-youtube.ru/wp-content/uploads/2024/08/kartinka-dlya-avatarki-siluety-muzhchin-risunok-odnogo-muzhskogo-silueta.jpg",
                    rect: {
                        x: 0,
                        y: 0,
                        width: 500,
                        height: 500
                    },
                    id: "22",
                }
            ],
            id: "23"
        },
        {
            background: {
                type: "color",
                color: "#923333ff"
            },
            slideObject: [
                {
                    type: "plain_text",
                    content: "Hi",
                    fontFamily: "Arial",
                    weight: 400,
                    scale: 1.0,
                    rect: {
                        x: 500,
                        y: 100,
                        width: 200,
                        height: 50
                    },
                    id: "24"
                },
                {
                    type: "plain_text",
                    content: "OOOO",
                    fontFamily: "Times New Roman",
                    weight: 600,
                    scale: 1.1,
                    rect: {
                        x: 150,
                        y: 150,
                        width: 200,
                        height: 50
                    },
                    id: "25"
                },
                {
                    type: "picture",
                    src: "https://shapka-youtube.ru/wp-content/uploads/2024/08/kartinka-dlya-avatarki-siluety-muzhchin-risunok-odnogo-muzhskogo-silueta.jpg",
                    rect: {
                        x: 0,
                        y: 0,
                        width: 500,
                        height: 500
                    },
                    id: "26",
                }
            ],
            id: "27"
        },
        
    ],
    selectedObjects: [],
    selectedSlide: "0"
}   
let presentation = presentationMin
let presentationChangeHandler = null

export function getPresentation() {
    return presentation
}

function setPresentation(newPresentation: Presentation) {
    presentation = newPresentation
}

export function dispatch(modifyFn, payload: object) {
    const newPresentation = modifyFn(presentation, payload)
    
    setPresentation(newPresentation)
    if(presentationChangeHandler) {
        presentationChangeHandler()
    }
}

export function addPresentationChangeHandler(handler) {
    presentationChangeHandler = handler
}